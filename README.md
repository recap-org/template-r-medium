# RECAP Template: R - Medium

## Purpose

This repository is a **[RECAP](https://recap-org.github.io)** template for **medium academic data projects using R**, such as final course projects, applied methods assignments, or replication exercises using raw data.

It provides a ready-to-use project structure and a reproducible execution environment that can be run:
- directly in the browser (e.g., GitHub Codespaces),
- or locally in common IDEs such as VS Code, Positron, or RStudio.

For guidance on how to run this template, choose an environment, or collaborate with others, see the main [RECAP documentation](https://recap-org.github.io).

## Getting started

To get started, click the **Use this template** button above the file list ⬆️.

You have two options: 

### Try it out online (without saving your work)

1. Select **Open in a codespace**. 
2. Wait for the codespace to be created and started. **This may take up to 5 minutes.** ☕
3. Once the codespace is ready, you can follow the instructions in the **Basic demo** section below.

### Make your own copy (to save your work)

If you want to keep working on this project (locally or in the cloud), create your own copy of the template.

The RECAP documentation explains:
- how to create your own repository,
- how to run the template locally or in an isolated environment,
- and how to choose the setup that fits your needs.

➡️ See **[How to run a RECAP template](https://recap-org.github.io/docs/running-templates/)** on the RECAP website.

## Demo

First, install the R packages used in this template. Open a terminal and type:

```bash
Rscript -e "install.packages(c('tidyverse', 'modelsummary', 'testthat'))"
```

Then, open a terminal and type: 

```bash
make
```

This will execute the data cleaning step in `./src/data.qmd`, then render the report in `./src/main.qmd`. You will find a PDF report with some basic data analysis and a photo in `./out/src/main.pdf`.

## Using this template

This template is organized as follows

```bash
├── LICENSE # license file
├── README.md # this file
├── assets
│   ├── figures # where generated figures go (not committed to git)
│   ├── tables # where generated tables go (not committed to git)
│   ├── static # where external images and other static assets live (committed to git)
│   └── references.bib # latex bibliography file (committed to git)
├── data
│   ├── raw # raw data goes here (committed to git)
│   └── processed # processed data goes here (not committed to git)
├── src # all the code goes here
│   ├── data.qmd # process raw data into clean data
│   ├── main.qmd # generate the final report
│   └── lib # helper functions
├── _quarto.yaml # configuration for Quarto
├── .lintr # configuration for R linting
└── .devcontainer # configuration for the containerized environment
```

### Producing the report

This template uses `make` to orchestrate the different steps of the analysis.  
If you are not familiar with `make`, we strongly recommend reading the following page first: [Building your project with make](https://recap-org.github.io/docs/building-with-make)

What follows focuses on how this template is structured, not on how `make` works internally.

#### Step 1: cleaning raw data

Raw data should be placed in the `./data/raw` directory and committed to git (unless it is very large, in which case you should consider alternative storage solutions).

The file `./src/data.qmd` turns raw data into clean, processed data.  
The processed data is written to the `./data/processed` directory.

We use a Quarto document for this step for several reasons:

- it produces a single, traceable output (`.pdf`) that can be used in build pipelines,
- it provides readable command-line output,
- it supports caching, which can dramatically speed up re-execution.

#### Step 2: producing the report

The file `./src/main.qmd` uses the processed data to produce the final report.  
It generates a PDF at `./out/src/main.pdf`.

### Running the full analysis

To run the full analysis from scratch, use:

```bash
make
```

This command executes both steps in the correct order:
1. compile `./src/data.qmd`,
2. compile `./src/main.qmd`.

Every RECAP template also provides a built-in way to discover available commands.  
If you are unsure how to interact with the project, start by running:

```bash
make
```

You can customize `./Makefile` to change how the build steps are executed.  
For an overview of the design principles behind this setup, see the `make` documentation linked above.

### External assets

A project may also use assets that are not generated by code (e.g., external images, bibliography, ...). These should be placed in `./assets/static` and committed to git. 

### Helper functions

Helper functions are shared across your data and analysis code. They are declared in `.R` files that are placed in `./src/lib`. Think of these helper functions as a quasi-R package that accompanies the project. As such, each of these functions should be properly documented so that all collaborators understand how they work.  

### Tests

This template includes a basic testing setup using the `testthat` package.

If you are not familiar with how testing works in RECAP, we recommend first reading our [documentation on tests](https://recap-org.github.io/docs/tests).

All test files must:

- live in the `tests/` directory, and
- have filenames that start with `test-`.

To run all tests, use:

```bash
make tests
```

For details on writing tests, see the official `testthat` [documentation](https://testthat.r-lib.org/).

### Configuration

Look into the following files to tweak things as you see fit: 

- `./.lintr`: R linting options
- `./_quarto.yaml`: Quarto options; we provide a set of sane defaults
- `./Makefile`: customize how build steps are executed

## Software environment

This template comes with a reproducible execution environment that includes R, Quarto,LaTeX, and other useful tools. We rely on the [Dev Container](https://code.visualstudio.com/docs/devcontainers/containers) specification, which means that you can extend the environment by editting `./.devcontainer/devcontainer.json`.

The exact software stack (including versions) is documented in the **[RECAP 2026-q1 image release](https://github.com/recap-org/images/releases/tag/2026-q1)**.

This information is mainly useful if you need to check versions or debug environment-specific issues.  
You do not need to understand or modify this to use the template.

## Issues and feedback

If something doesn't work as expected, or if you have a suggestion for improving this template, please open an issue on this repository (Issue tab ⬆️).

You don't need to be sure that something is "really a bug" — unclear instructions, confusing behavior, or small setup problems are all worth reporting. Your feedback helps improve RECAP for everyone.

## Credits

We thank 

- [Jason Leung](https://unsplash.com/@ninjason?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash) on [Unsplash](https://unsplash.com/photos/donkey-kong-arcade-game-screen-with-1981-date-c5tiCWrZADc?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash) for that nice Donkey Kong photo.
- [grandmaster07](https://www.kaggle.com/grandmaster07) for the student exam score dataset analysis published on [Kaggle](https://www.kaggle.com/datasets/grandmaster07/student-exam-score-dataset-analysis)
